# FastAPI 后续学习路线图

> 本文档记录了已完成的学习内容和待学习的技术点
> 最后更新：2025-12-25

---

## ✅ 已完成的学习内容

- [x] FastAPI 基础（路由、请求、响应、依赖注入）
- [x] Pydantic 数据验证
- [x] SQLAlchemy ORM
- [x] Alembic 数据库迁移（含自动生成）
- [x] JWT 认证和授权
- [x] 异步编程（async/await）
- [x] Redis 缓存（基础）
- [x] Celery 异步任务和定时任务
- [x] 日志系统（基础）
- [x] 异常处理和统一响应格式
- [x] Docker + Docker Compose
- [x] Nginx 反向代理和负载均衡
- [x] 中间件（CORS、日志、错误处理）
- [x] 配置管理（环境变量）

---

## 🎯 待学习内容（按优先级排序）

### 🔴 **第一优先级（核心必学）**

#### 1. 测试（Testing）⭐⭐⭐⭐⭐
> 从 Demo 到工程化项目的必经之路

**学习内容**：
- [ ] pytest 框架基础
- [ ] 单元测试（Service、Utils）
- [ ] 集成测试（API 接口）
- [ ] 测试数据库（TestClient + SQLite）
- [ ] Mock 和 Fixture
- [ ] 测试覆盖率（pytest-cov）
- [ ] 异步测试（pytest-asyncio）

**为什么重要**：
- 保证代码质量
- 防止回归 Bug
- 面试必问
- CI/CD 基础

---

#### 2. 文件上传和处理 ⭐⭐⭐⭐⭐
> 几乎所有项目都需要

**学习内容**：
- [ ] FastAPI 文件上传（UploadFile）
- [ ] 文件类型验证（MIME type）
- [ ] 文件大小限制
- [ ] 本地存储（保存到磁盘）
- [ ] 云存储（阿里云 OSS / AWS S3）
- [ ] 图片处理（Pillow：压缩、裁剪、水印）
- [ ] 文件下载（流式传输）
- [ ] 大文件分片上传
- [ ] 文件 URL 签名（防盗链）

**为什么重要**：
- 用户头像上传
- 文档管理
- 图片处理
- 实际项目必备

---

#### 3. 分页和查询优化 ⭐⭐⭐⭐⭐
> 性能优化基础

**学习内容**：
- [ ] 分页实现（offset/limit）
- [ ] 游标分页（cursor-based）
- [ ] 查询优化（select 指定字段）
- [ ] N+1 问题识别和解决
- [ ] 索引优化（创建、使用、分析）
- [ ] 预加载（joinedload, selectinload）
- [ ] 查询构建器（动态过滤、排序）
- [ ] 分页组件封装

**为什么重要**：
- 列表接口必备
- 性能优化核心
- 数据量大时必须

---

#### 4. 邮件发送（实际实现）⭐⭐⭐⭐
> 用户通知、密码重置

**学习内容**：
- [ ] SMTP 服务器配置
- [ ] 使用 aiosmtplib 异步发送
- [ ] HTML 邮件模板（Jinja2）
- [ ] 邮件附件
- [ ] 邮件队列（Celery 集成）
- [ ] 发送失败重试
- [ ] 邮件日志记录
- [ ] 第三方邮件服务（SendGrid、阿里云邮件推送）

**为什么重要**：
- 用户注册验证
- 密码重置
- 系统通知

**备注**：Celery 邮件任务已学，但实际 SMTP 配置未实现

---

### 🟡 **第二优先级（功能扩展）**

#### 5. WebSocket 实时通信 ⭐⭐⭐⭐
> 实时功能（聊天、通知）

**学习内容**：
- [ ] FastAPI WebSocket 基础
- [ ] 连接管理（ConnectionManager）
- [ ] 广播消息
- [ ] 房间（Room）概念
- [ ] 心跳机制（防止断线）
- [ ] 认证和授权（WebSocket + JWT）
- [ ] Redis 发布订阅（多实例同步）
- [ ] 实战：在线聊天室

**为什么重要**：
- 实时聊天
- 实时通知
- 协同编辑

---

#### 6. 搜索功能 ⭐⭐⭐⭐
> 提升用户体验

**学习内容**：
- [ ] 数据库模糊查询（LIKE）
- [ ] 全文搜索（PostgreSQL）
- [ ] 搜索权重和排序
- [ ] 搜索建议（自动补全）
- [ ] Elasticsearch 集成（进阶）
- [ ] 搜索结果高亮
- [ ] 搜索日志分析

**为什么重要**：
- 用户搜索
- 商品搜索
- 文章搜索

---

#### 7. 对象存储（OSS/S3）⭐⭐⭐⭐
> 生产环境文件存储

**学习内容**：
- [ ] 阿里云 OSS SDK
- [ ] AWS S3 SDK
- [ ] 文件上传到云
- [ ] CDN 加速配置
- [ ] 私有文件访问（签名 URL）
- [ ] 文件生命周期管理
- [ ] 成本优化（存储类型）

**为什么重要**：
- 生产环境必备
- 本地存储不可靠
- CDN 加速

---

#### 8. 安全进阶 ⭐⭐⭐⭐
> 防止攻击

**学习内容**：
- [ ] RBAC（基于角色的权限控制）
- [ ] 权限装饰器（@require_permission）
- [ ] Rate Limiting（Redis 实现）
- [ ] SQL 注入防护（ORM 最佳实践）
- [ ] XSS 防护（输入过滤）
- [ ] CSRF 防护
- [ ] API Key 管理
- [ ] OAuth2 第三方登录（Google、GitHub）
- [ ] OIDC（OpenID Connect）
- [ ] 密码强度验证
- [ ] 敏感信息加密（数据库字段）

**为什么重要**：
- 安全第一
- 防止黑客攻击
- 合规要求

---

#### 9. 高级缓存策略 ⭐⭐⭐
> Redis 进阶

**学习内容**：
- [ ] 缓存穿透（布隆过滤器）
- [ ] 缓存击穿（分布式锁）
- [ ] 缓存雪崩（过期时间随机化）
- [ ] 缓存预热
- [ ] 缓存更新策略（Cache-Aside, Write-Through）
- [ ] Redis 分布式锁（Redlock）
- [ ] Redis 发布订阅（Pub/Sub）
- [ ] Redis Stream（消息队列）

**为什么重要**：
- 高并发场景
- 性能优化

**备注**：Redis 基础已学，这是进阶内容

---

#### 10. 数据库优化 ⭐⭐⭐
> SQLAlchemy 进阶

**学习内容**：
- [ ] 索引优化（复合索引、覆盖索引）
- [ ] 慢查询分析
- [ ] 连接池配置优化
- [ ] 事务隔离级别
- [ ] 读写分离
- [ ] 分库分表思想（了解）
- [ ] 数据库备份和恢复
- [ ] 表分区（Partition）

**为什么重要**：
- 性能优化核心
- 数据量大时必须

**备注**：SQLAlchemy 基础已学，这是优化内容

---

### 🟢 **第三优先级（生产就绪）**

#### 11. 监控与可观测性 ⭐⭐⭐
> 系统上线后必备

**学习内容**：

**日志系统**：
- [ ] 结构化日志（JSON Logs）
- [ ] 日志聚合（ELK: Elasticsearch + Logstash + Kibana）
- [ ] 日志聚合（Loki + Grafana）
- [ ] 日志轮转和归档

**指标监控**：
- [ ] Prometheus 指标采集
- [ ] 自定义指标（API 响应时间、QPS、错误率）
- [ ] Grafana 可视化大屏
- [ ] 告警规则配置

**错误追踪**：
- [ ] Sentry 集成
- [ ] 自动捕获异常
- [ ] 错误报警通知
- [ ] 错误趋势分析

**链路追踪**：
- [ ] OpenTelemetry 基础
- [ ] 分布式追踪（了解）

**为什么重要**：
- 生产环境必备
- 快速定位问题
- 性能分析

**备注**：基础日志系统已学，这是生产级监控

---

#### 12. CI/CD 自动化 ⭐⭐⭐
> 自动化部署

**学习内容**：
- [ ] GitHub Actions 基础
- [ ] 自动化测试流程
- [ ] 自动化部署流程
- [ ] Docker 镜像自动构建和推送
- [ ] 多环境管理（dev、staging、prod）
- [ ] 回滚机制
- [ ] 蓝绿部署（了解）
- [ ] 金丝雀发布（了解）

**为什么重要**：
- 提高开发效率
- 减少人为错误
- 现代开发必备

---

#### 13. 数据导出 ⭐⭐⭐
> 报表功能

**学习内容**：
- [ ] Excel 导出（openpyxl）
- [ ] CSV 导出
- [ ] PDF 导出（reportlab）
- [ ] 大数据量导出（流式处理）
- [ ] 导出任务队列（Celery）
- [ ] 导出进度追踪

**为什么重要**：
- 后台管理系统必备
- 数据分析

**备注**：Celery 报表任务已学概念，但实际 Excel/PDF 生成未实现

---

### 🔵 **第四优先级（可选进阶）**

#### 14. 第三方服务集成 ⭐⭐
**学习内容**：
- [ ] 短信发送（阿里云、腾讯云）
- [ ] 支付接口（微信支付、支付宝）
- [ ] 第三方登录（OAuth2）
- [ ] 地图服务（高德、百度）
- [ ] 实名认证
- [ ] OCR 识别

---

#### 15. 国际化（i18n）⭐⭐
**学习内容**：
- [ ] 多语言支持
- [ ] 翻译文件管理
- [ ] 动态语言切换
- [ ] 时区处理

---

#### 16. 消息推送 ⭐⭐
**学习内容**：
- [ ] Server-Sent Events (SSE)
- [ ] WebSocket 推送（已在 WebSocket 部分）
- [ ] 移动端推送（APNs、FCM）
- [ ] 浏览器推送（Web Push）

---

#### 17. API 文档进阶 ⭐⭐
**学习内容**：
- [ ] 自定义 Swagger UI 样式
- [ ] API 版本管理
- [ ] 文档示例优化
- [ ] Markdown 文档集成

---

#### 18. 高级架构（了解即可）⭐
**学习内容**：
- [ ] GraphQL（替代 REST）
- [ ] 消息队列（RabbitMQ、Kafka）
- [ ] 微服务架构
- [ ] gRPC
- [ ] Service Mesh（了解）

---

## 📝 学习建议

### 第一阶段（2-3 周）- 核心补充
1. 测试（pytest）- 3 天
2. 文件上传 - 2 天
3. 分页和查询优化 - 2 天
4. 邮件发送 - 1 天

### 第二阶段（2-3 周）- 功能扩展
5. WebSocket - 2 天
6. 搜索功能 - 2 天
7. 对象存储（OSS）- 1 天
8. 安全进阶 - 3 天

### 第三阶段（2-3 周）- 生产就绪
9. 高级缓存策略 - 2 天
10. 数据库优化 - 2 天
11. 监控与可观测性 - 3 天
12. CI/CD - 2 天

### 第四阶段（按需学习）- 进阶内容
13. 数据导出 - 2 天
14. 第三方服务集成 - 按需
15. 其他进阶内容 - 按需

---

## 🎯 学习路径建议

**如果你想快速找工作**：
重点学习第一阶段 + 第二阶段前 4 项

**如果你想做完整项目**：
学完第一、第二、第三阶段

**如果你想成为高级开发**：
全部学完 + 部分第四阶段内容

---

## 📚 参考资源

- [FastAPI 官方文档](https://fastapi.tiangolo.com/)
- [SQLAlchemy 官方文档](https://docs.sqlalchemy.org/)
- [Pytest 官方文档](https://docs.pytest.org/)
- [Redis 官方文档](https://redis.io/docs/)
- [Celery 官方文档](https://docs.celeryproject.org/)
- [Docker 官方文档](https://docs.docker.com/)

---

**下一步**：从"测试（Testing）"开始，这是最重要且最基础的技能！
